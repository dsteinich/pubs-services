<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd"> 

<mapper namespace="pwPublication">

    <resultMap id="result" type="PwPublication" extends="publication.result">
        <collection property="costCenters" column="publication_id" select="pwPublicationCostCenter.getByPublication"/>
        <collection property="authors" column="publication_id" select="pwPublicationContributor.getAuthorsByPublication"/>
        <collection property="editors" column="publication_id" select="pwPublicationContributor.getEditorsByPublication"/>
        <collection property="links" column="publication_id" select="pwPublicationLink.getByPublication"/>
<!--         <result property="webDocFlag" column="web_doc_flag"/> -->
<!--         <result property="usgsCitationDisplay" column="usgs_citation_display"/> -->
<!--         <result property="basicSearch" column="basic_search"/> -->
<!--         <result property="contentsBreakdown" column="contents_breakdown"/> -->
<!--         <result property="searchResults" column="pw_srch_results"/> -->
    </resultMap>

<!--     <sql id="cols"> -->
<!--         web_doc_flag, usgs_citation_display, basic_search, contents_breakdown, pw_srch_results -->
<!--     </sql> -->

<!--     <sql id="hosts"> -->
<!--         #{webDocFlag,jdbcType=VARCHAR}, -->
<!--         #{usgsCitationDisplay,jdbcType=VARCHAR}, -->
<!--         #{basicSearch,jdbcType=VARCHAR}, -->
<!--         #{contentsBreakdown,jdbcType=VARCHAR}, -->
<!--         #{searchResults,jdbcType=VARCHAR} -->
<!--     </sql> -->

<!--     <sql id="sets"> -->
<!--         web_doc_flag = #{webDocFlag,jdbcType=VARCHAR}, -->
<!--         usgs_citation_display = #{usgsCitationDisplay,jdbcType=VARCHAR}, -->
<!--         basic_search = #{basicSearch,jdbcType=VARCHAR}, -->
<!--         contents_breakdown = #{contentsBreakdown,jdbcType=VARCHAR}, -->
<!--         pw_srch_results = #{searchResults,jdbcType=VARCHAR} -->
<!--     </sql> -->

<!--     <insert id="add" parameterType="PwPublication"> -->
<!--         <selectKey keyProperty="id" resultType="Integer" order="BEFORE"> -->
<!--             select nvl(#{id,jdbcType=NUMERIC},prod_id_seq.nextval) id from dual -->
<!--         </selectKey> -->
<!--         insert into publication (<include refid="publication.cols"/>, -->
<!--                                     <include refid="cols"/>) -->
<!--              values (<include refid="publication.hosts"/>, -->
<!--                      <include refid="hosts"/>) -->
<!--     </insert> -->

    <sql id="baseSelect">
        select <include refid="publication.cols"/>
          from publication
    </sql>

<!--     <select id="getByIpdsId" parameterType="String" resultMap="result"> -->
<!--         <include refid="baseSelect"/>  -->
<!--            where ipds_id = #{value,jdbcType=VARCHAR} -->
<!--     </select> -->

    <select id="getById" parameterType="Integer" resultMap="result">
        <include refid="baseSelect"/> 
           where publication_id = #{value,jdbcType=VARCHAR}
    </select>

<!--     <select id="getByMap" parameterType="map" resultMap="result"> -->
<!--         <include refid="baseSelect"/> -->
<!--         <include refid="publication.filters"/> -->
<!--     </select> -->

<!--     <update id="update" parameterType="PwLinkDim"> -->
<!--         update pw_publication -->
<!--            set <include refid="publication.sets"/>, -->
<!--                <include refid="sets"/>, -->
<!--                <include refid="base.auditSets"/>  -->
<!--          where publication_id = #{id,jdbcType=NUMERIC} -->
<!--     </update> -->

<!--     <delete id="delete" parameterType="Integer"> -->
<!--         delete from pw_publication -->
<!--          where publication_id = #{value,jdbcType=NUMERIC} -->
<!--     </delete> -->

</mapper>
